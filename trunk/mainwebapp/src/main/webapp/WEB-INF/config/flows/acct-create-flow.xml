<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/webflow
		http://www.springframework.org/schema/webflow/spring-webflow-1.0.xsd">

  
  <var name="wrapper" 
       class="org.duraspace.mainwebapp.domain.cmd.flow.DuraAcctCreateWrapper" 
       scope="flow" />

  <start-state idref="inputDuraAcctInfo"/>

  <view-state id="inputDuraAcctInfo" view="acctCreate/dura/inputDuraAcctInfo">
    <transition on="submit" to="verifyDuraAcctInfo" />
  </view-state>

  <action-state id="verifyDuraAcctInfo">
    <action bean="duraAcctInputController"/>
    <transition on="success" to="inputUserInfo"/>
  </action-state>
  
  <view-state id="inputUserInfo" view="acctCreate/dura/inputUserInfo">
    <transition on="submit" to="verifyUserInfo" />
  </view-state>
  
  <action-state id="verifyUserInfo">
    <action bean="userInfoInputController"/>
    <transition on="success" to="reviewAcct"/>
  </action-state>

  <view-state id="reviewAcct" view="acctCreate/dura/reviewAcct">
    <transition on="submit" to="saveAcct"/>
  </view-state>
  
  <action-state id="saveAcct">
    <action bean="saveDuraAcctController"/>
    <transition on="success" to="acctComplete"/>
  </action-state>
  
  <view-state id="acctComplete" view="acctCreate/dura/acctComplete">
    <transition on="submit" to="finish"/>
  </view-state>

  <view-state id="cancelOptions" view="acctCreate/dura/cancel">
    <transition on="start" to="inputDuraAcctInfo"/>
    <transition on="home" to="finish" />
  </view-state>
  
  <view-state id="error" view="error"/>

  <end-state id="finish" view="home/home" />
  
  <global-transitions>
    <transition on="cancel" to="cancelOptions" />
  </global-transitions>
</flow>
